{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/src/components/AIQuizCreator.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\n// --- CONFIGURATION ---\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8001\";\r\n\r\ninterface AIQuizCreatorProps {\r\n  sessionCode: string;\r\n  onClose: () => void;\r\n  // Allows any object structure to pass through to the parent\r\n  onSuccess: (quizData: Record<string, unknown>) => void; \r\n}\r\n\r\nexport default function AIQuizCreator({ sessionCode, onClose, onSuccess }: AIQuizCreatorProps) {\r\n  const [topic, setTopic] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleGenerate = async () => {\r\n    if (!topic.trim()) {\r\n        setError(\"Please enter a topic.\");\r\n        return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const res = await fetch(`${API_URL}/api/session/${sessionCode}/quiz/generate`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ prompt: topic }),\r\n      });\r\n\r\n      if (!res.ok) {\r\n          const errData = await res.json();\r\n          throw new Error(errData.detail || \"AI Service Unavailable\");\r\n      }\r\n      \r\n      const data = await res.json();\r\n      \r\n      // Pass the data up to the parent (PresenterDashboard)\r\n      // The parent handles validation and starting the quiz on the server.\r\n      onSuccess(data.quiz || data); \r\n      onClose();\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(\"Failed to generate quiz. The AI might be busy, try again in a moment.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-100 backdrop-blur-sm animate-in fade-in\">\r\n      <div className=\"bg-slate-900 border border-slate-700 p-8 rounded-2xl w-full max-w-md shadow-2xl relative\">\r\n        <button \r\n            onClick={onClose} \r\n            className=\"absolute top-4 right-4 text-slate-400 hover:text-white transition text-xl font-bold p-2\"\r\n        >\r\n            âœ•\r\n        </button>\r\n\r\n        <div className=\"text-center mb-8\">\r\n            <span className=\"text-5xl mb-4 block animate-bounce\">âœ¨</span>\r\n            <h2 className=\"text-3xl font-bold bg-clip-text text-transparent bg-linear-to-r from-purple-400 to-pink-600\">\r\n                AI Quiz Generator\r\n            </h2>\r\n            <p className=\"text-slate-400 mt-2\">\r\n                Powered by Gemini 1.5 Flash\r\n            </p>\r\n        </div>\r\n\r\n        <div className=\"space-y-6\">\r\n          <input \r\n              type=\"text\" \r\n              value={topic} \r\n              onChange={(e) => setTopic(e.target.value)} \r\n              placeholder=\"e.g. 'Space Exploration', 'JavaScript'...\" \r\n              className=\"w-full bg-slate-800 border border-slate-700 p-4 rounded-xl text-white text-lg outline-none focus:ring-2 focus:ring-purple-500 transition-all placeholder:text-slate-600\"\r\n              disabled={loading}\r\n              onKeyDown={(e) => e.key === 'Enter' && handleGenerate()}\r\n              autoFocus \r\n          />\r\n\r\n          {error && (\r\n              <div className=\"p-3 bg-red-900/20 border border-red-900/50 rounded-lg text-red-400 text-sm text-center font-bold animate-in slide-in-from-top-1\">\r\n                  {error}\r\n              </div>\r\n          )}\r\n\r\n          <button \r\n            onClick={handleGenerate} \r\n            disabled={loading}\r\n            className={`w-full py-4 rounded-xl font-bold text-lg transition flex items-center justify-center gap-2 ${\r\n                loading \r\n                ? \"bg-slate-800 text-slate-500 cursor-not-allowed\" \r\n                : \"bg-linear-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white shadow-lg hover:shadow-purple-500/25 active:scale-95\"\r\n            }`}\r\n          >\r\n            {loading ? (\r\n                <>\r\n                    <span className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\"></span>\r\n                    Generating...\r\n                </>\r\n            ) : (\r\n                \"Generate & Launch ðŸš€\"\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAKgB;;AAHhB;;;AAFA;;AAIA,wBAAwB;AACxB,MAAM,UAAU,6DAAmC;AASpC,SAAS,cAAc,EAAE,WAAW,EAAE,OAAO,EAAE,SAAS,EAAsB;;IAC3F,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,MAAM,iBAAiB;QACrB,IAAI,CAAC,MAAM,IAAI,IAAI;YACf,SAAS;YACT;QACJ;QAEA,WAAW;QACX,SAAS;QAET,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,aAAa,EAAE,YAAY,cAAc,CAAC,EAAE;gBAC7E,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,QAAQ;gBAAM;YACvC;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACT,MAAM,UAAU,MAAM,IAAI,IAAI;gBAC9B,MAAM,IAAI,MAAM,QAAQ,MAAM,IAAI;YACtC;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,sDAAsD;YACtD,qEAAqE;YACrE,UAAU,KAAK,IAAI,IAAI;YACvB;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,SAAS;QACX,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBACG,SAAS;oBACT,WAAU;8BACb;;;;;;8BAID,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAK,WAAU;sCAAqC;;;;;;sCACrD,6LAAC;4BAAG,WAAU;sCAA8F;;;;;;sCAG5G,6LAAC;4BAAE,WAAU;sCAAsB;;;;;;;;;;;;8BAKvC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACG,MAAK;4BACL,OAAO;4BACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4BACxC,aAAY;4BACZ,WAAU;4BACV,UAAU;4BACV,WAAW,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW;4BACvC,SAAS;;;;;;wBAGZ,uBACG,6LAAC;4BAAI,WAAU;sCACV;;;;;;sCAIT,6LAAC;4BACC,SAAS;4BACT,UAAU;4BACV,WAAW,CAAC,2FAA2F,EACnG,UACE,mDACA,sJACJ;sCAED,wBACG;;kDACI,6LAAC;wCAAK,WAAU;;;;;;oCAAmF;;+CAIvG;;;;;;;;;;;;;;;;;;;;;;;AAOhB;GApGwB;KAAA"}}]
}