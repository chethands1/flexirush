{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/src/components/CreatePollForm.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\ninterface CreatePollFormProps {\r\n  sessionCode: string;\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function CreatePollForm({ sessionCode, onClose }: CreatePollFormProps) {\r\n  const [question, setQuestion] = useState(\"\");\r\n  const [type, setType] = useState(\"multiple_choice\");\r\n  const [options, setOptions] = useState([\"Yes\", \"No\"]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Logic matches backend Pydantic model\r\n      const payload = {\r\n        question,\r\n        type,\r\n        options: type === \"multiple_choice\" \r\n          ? options.map(opt => ({ label: opt, votes: 0 })) \r\n          : [],\r\n        correct_option: null \r\n      };\r\n\r\n      const res = await fetch(`http://localhost:8001/api/session/${sessionCode}/poll/start`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const err = await res.json();\r\n        alert(`Error: ${err.detail?.[0]?.msg || \"Failed to start poll\"}`);\r\n      } else {\r\n        onClose();\r\n      }\r\n    } catch {\r\n      alert(\"Network error.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50 backdrop-blur-sm\">\r\n      <div className=\"bg-slate-900 border border-slate-700 p-6 rounded-2xl w-full max-w-md shadow-2xl\">\r\n        <h2 className=\"text-xl font-bold mb-4 text-white\">Create Poll</h2>\r\n        \r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div>\r\n            {/* FIX: Added htmlFor to link label to input */}\r\n            <label htmlFor=\"poll-question\" className=\"text-xs font-bold text-slate-500 uppercase\">Question</label>\r\n            <input \r\n              id=\"poll-question\"\r\n              className=\"w-full bg-slate-800 p-3 rounded-lg text-white border border-slate-700 mt-1 focus:ring-2 focus:ring-blue-500 outline-none\"\r\n              placeholder=\"What do you think?\"\r\n              value={question}\r\n              onChange={(e) => setQuestion(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            {/* FIX: Added htmlFor and aria-label to satisfy accessibility linter */}\r\n            <label htmlFor=\"poll-type\" className=\"text-xs font-bold text-slate-500 uppercase\">Type</label>\r\n            <select \r\n              id=\"poll-type\"\r\n              aria-label=\"Poll Type\"\r\n              className=\"w-full bg-slate-800 p-3 rounded-lg text-white border border-slate-700 mt-1\"\r\n              value={type}\r\n              onChange={(e) => setType(e.target.value)}\r\n            >\r\n              <option value=\"multiple_choice\">Multiple Choice</option>\r\n              <option value=\"word_cloud\">Word Cloud</option>\r\n              <option value=\"rating\">Rating (1-5)</option>\r\n              <option value=\"open_ended\">Open Ended</option>\r\n            </select>\r\n          </div>\r\n\r\n          {type === \"multiple_choice\" && (\r\n            <div>\r\n              <label htmlFor=\"poll-options\" className=\"text-xs font-bold text-slate-500 uppercase\">Options (comma separated)</label>\r\n              <input \r\n                id=\"poll-options\"\r\n                className=\"w-full bg-slate-800 p-3 rounded-lg text-white border border-slate-700 mt-1\"\r\n                placeholder=\"Yes, No, Maybe\"\r\n                value={options.join(\", \")}\r\n                onChange={(e) => setOptions(e.target.value.split(\",\").map(s => s.trim()))}\r\n                required\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex gap-3 pt-4\">\r\n            <button type=\"button\" onClick={onClose} className=\"flex-1 py-3 text-slate-400 hover:bg-slate-800 rounded-lg font-bold\">Cancel</button>\r\n            <button type=\"submit\" disabled={loading} className=\"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-bold shadow-lg\">\r\n              {loading ? \"Launching...\" : \"Launch Poll ðŸš€\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AASe,SAAS,eAAe,EAAE,WAAW,EAAE,OAAO,EAAuB;;IAClF,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;QAAC;QAAO;KAAK;IACpD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,WAAW;QAEX,IAAI;YACF,uCAAuC;YACvC,MAAM,UAAU;gBACd;gBACA;gBACA,SAAS,SAAS,oBACd,QAAQ,GAAG,CAAC,CAAA,MAAO,CAAC;wBAAE,OAAO;wBAAK,OAAO;oBAAE,CAAC,KAC5C,EAAE;gBACN,gBAAgB;YAClB;YAEA,MAAM,MAAM,MAAM,MAAM,CAAC,kCAAkC,EAAE,YAAY,WAAW,CAAC,EAAE;gBACrF,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,MAAM,MAAM,IAAI,IAAI;gBAC1B,MAAM,CAAC,OAAO,EAAE,IAAI,MAAM,EAAE,CAAC,EAAE,EAAE,OAAO,wBAAwB;YAClE,OAAO;gBACL;YACF;QACF,EAAE,OAAM;YACN,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAoC;;;;;;8BAElD,6LAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACtC,6LAAC;;8CAEC,6LAAC;oCAAM,SAAQ;oCAAgB,WAAU;8CAA6C;;;;;;8CACtF,6LAAC;oCACC,IAAG;oCACH,WAAU;oCACV,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oCAC3C,QAAQ;;;;;;;;;;;;sCAIZ,6LAAC;;8CAEC,6LAAC;oCAAM,SAAQ;oCAAY,WAAU;8CAA6C;;;;;;8CAClF,6LAAC;oCACC,IAAG;oCACH,cAAW;oCACX,WAAU;oCACV,OAAO;oCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;;sDAEvC,6LAAC;4CAAO,OAAM;sDAAkB;;;;;;sDAChC,6LAAC;4CAAO,OAAM;sDAAa;;;;;;sDAC3B,6LAAC;4CAAO,OAAM;sDAAS;;;;;;sDACvB,6LAAC;4CAAO,OAAM;sDAAa;;;;;;;;;;;;;;;;;;wBAI9B,SAAS,mCACR,6LAAC;;8CACC,6LAAC;oCAAM,SAAQ;oCAAe,WAAU;8CAA6C;;;;;;8CACrF,6LAAC;oCACC,IAAG;oCACH,WAAU;oCACV,aAAY;oCACZ,OAAO,QAAQ,IAAI,CAAC;oCACpB,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI;oCACrE,QAAQ;;;;;;;;;;;;sCAKd,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAO,MAAK;oCAAS,SAAS;oCAAS,WAAU;8CAAqE;;;;;;8CACvH,6LAAC;oCAAO,MAAK;oCAAS,UAAU;oCAAS,WAAU;8CAChD,UAAU,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO1C;GApGwB;KAAA"}}]
}