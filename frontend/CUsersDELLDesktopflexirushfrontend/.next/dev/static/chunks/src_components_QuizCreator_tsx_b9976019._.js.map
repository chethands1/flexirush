{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/src/components/QuizCreator.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\n// PATCH: Strict types to eliminate 'any'\r\ninterface Question {\r\n  id: string;\r\n  text: string;\r\n  options: string[];\r\n  correct_index: number;\r\n  time_limit: number;\r\n}\r\n\r\nexport default function QuizCreator({ sessionCode, onClose }: { sessionCode: string; onClose: () => void }) {\r\n  const [title, setTitle] = useState(\"Fun Quiz\");\r\n  const [questions, setQuestions] = useState<Question[]>([\r\n    { id: \"1\", text: \"\", options: [\"\", \"\", \"\", \"\"], correct_index: 0, time_limit: 30 }\r\n  ]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // PATCH: Typed helper to update question fields safely\r\n  const updateQuestion = <K extends keyof Question>(idx: number, field: K, value: Question[K]) => {\r\n    const newQs = [...questions];\r\n    newQs[idx][field] = value;\r\n    setQuestions(newQs);\r\n  };\r\n\r\n  const updateOption = (qIdx: number, oIdx: number, val: string) => {\r\n    const newQs = [...questions];\r\n    // Create a new array for options to ensure React detects the change\r\n    const newOptions = [...newQs[qIdx].options];\r\n    newOptions[oIdx] = val;\r\n    newQs[qIdx].options = newOptions;\r\n    setQuestions(newQs);\r\n  };\r\n\r\n  const handleLaunch = async () => {\r\n    // Basic validation\r\n    if (questions.some(q => !q.text.trim() || q.options.some(o => !o.trim()))) {\r\n       alert(\"Please fill in all questions and options.\");\r\n       return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n        await fetch(`http://localhost:8001/api/session/${sessionCode}/quiz/start`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ title, questions })\r\n        });\r\n        onClose();\r\n    } catch (error) {\r\n        console.error(error);\r\n        alert(\"Failed to start quiz.\");\r\n    } finally {\r\n        setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4 overflow-y-auto\">\r\n      <div className=\"bg-slate-900 w-full max-w-2xl p-6 rounded-2xl border border-slate-700 animate-in fade-in zoom-in duration-200\">\r\n        <h2 className=\"text-2xl font-bold mb-4 text-white\">Create Quiz</h2>\r\n        \r\n        <input \r\n            aria-label=\"Quiz Title\"\r\n            className=\"w-full bg-slate-800 p-2 rounded mb-4 text-white border border-slate-700 focus:border-blue-500 outline-none transition\" \r\n            value={title} \r\n            onChange={e => setTitle(e.target.value)} \r\n            placeholder=\"Enter Quiz Title...\"\r\n        />\r\n        \r\n        <div className=\"space-y-6 max-h-[50vh] overflow-y-auto mb-4 pr-2 custom-scrollbar\">\r\n            {questions.map((q, qIdx) => (\r\n                <div key={q.id} className=\"p-4 bg-slate-800 rounded-xl border border-slate-700\">\r\n                    <div className=\"flex justify-between mb-2\">\r\n                        <span className=\"font-bold text-slate-300\">Question {qIdx + 1}</span>\r\n                        \r\n                        <select \r\n                            aria-label=\"Time limit per question\"\r\n                            className=\"bg-slate-700 rounded px-2 py-1 text-sm outline-none focus:ring-1 focus:ring-blue-500 text-white\"\r\n                            value={q.time_limit}\r\n                            onChange={(e) => updateQuestion(qIdx, \"time_limit\", parseInt(e.target.value))}\r\n                        >\r\n                            <option value={10}>10s</option>\r\n                            <option value={20}>20s</option>\r\n                            <option value={30}>30s</option>\r\n                            <option value={60}>60s</option>\r\n                        </select>\r\n                    </div>\r\n                    \r\n                    <input \r\n                        aria-label={`Question ${qIdx + 1} text`}\r\n                        className=\"w-full bg-slate-700 p-2 rounded mb-3 text-white placeholder-slate-400 outline-none focus:ring-1 focus:ring-blue-500 transition\" \r\n                        placeholder=\"e.g. What is the capital of France?\"\r\n                        value={q.text}\r\n                        onChange={(e) => updateQuestion(qIdx, \"text\", e.target.value)}\r\n                    />\r\n                    \r\n                    <div className=\"grid grid-cols-2 gap-2\">\r\n                        {q.options.map((opt, oIdx) => (\r\n                            <div key={oIdx} className=\"flex items-center gap-2\">\r\n                                <input \r\n                                    type=\"radio\" \r\n                                    name={`correct-${q.id}`} \r\n                                    aria-label={`Mark option ${oIdx + 1} as correct`}\r\n                                    checked={q.correct_index === oIdx}\r\n                                    onChange={() => updateQuestion(qIdx, \"correct_index\", oIdx)}\r\n                                    className=\"accent-green-500 w-4 h-4 cursor-pointer\"\r\n                                />\r\n                                \r\n                                <input \r\n                                    aria-label={`Option ${oIdx + 1} text`}\r\n                                    className=\"w-full bg-slate-700 p-2 rounded text-sm text-white placeholder-slate-400 outline-none focus:ring-1 focus:ring-blue-500 transition\"\r\n                                    placeholder={`Option ${oIdx + 1}`}\r\n                                    value={opt}\r\n                                    onChange={(e) => updateOption(qIdx, oIdx, e.target.value)}\r\n                                />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </div>\r\n        \r\n        <button \r\n            onClick={() => setQuestions([...questions, { id: Date.now().toString(), text: \"\", options: [\"\", \"\", \"\", \"\"], correct_index: 0, time_limit: 30 }])} \r\n            className=\"text-blue-400 text-sm mb-6 hover:underline font-bold\"\r\n        >\r\n            + Add Question\r\n        </button>\r\n\r\n        <div className=\"flex gap-4\">\r\n            <button onClick={onClose} className=\"flex-1 py-3 bg-slate-800 rounded hover:bg-slate-700 text-slate-300 transition\">Cancel</button>\r\n            <button \r\n                onClick={handleLaunch} \r\n                disabled={loading} \r\n                className=\"flex-1 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded transition disabled:opacity-50 flex justify-center items-center gap-2\"\r\n            >\r\n                {loading ? (\r\n                    <>\r\n                       <span className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"></span>\r\n                       Starting...\r\n                    </>\r\n                ) : \"Launch Quiz\"}\r\n            </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}