{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/src/components/ReactionOverlay.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { useSessionStore } from \"@/store/sessionStore\";\r\n\r\ninterface FloatingEmoji {\r\n  id: number;\r\n  emoji: string;\r\n  left: number;\r\n  duration: number;\r\n}\r\n\r\nexport default function ReactionOverlay() {\r\n  const lastReaction = useSessionStore((state) => state.lastReaction);\r\n  const [emojis, setEmojis] = useState<FloatingEmoji[]>([]);\r\n  const prevReactionRef = useRef<string | null>(null);\r\n  const timeoutsRef = useRef<Set<NodeJS.Timeout>>(new Set());\r\n\r\n  useEffect(() => {\r\n    if (!lastReaction || lastReaction === prevReactionRef.current) return;\r\n    prevReactionRef.current = lastReaction;\r\n\r\n    const emojiChar = lastReaction.split(\"-\")[0];\r\n    const newId = Date.now();\r\n    const duration = 2 + Math.random() * 2;\r\n\r\n    const newEmoji: FloatingEmoji = {\r\n      id: newId,\r\n      emoji: emojiChar,\r\n      left: Math.random() * 90,\r\n      duration: duration\r\n    };\r\n\r\n    requestAnimationFrame(() => {\r\n      setEmojis((prev) => [...prev, newEmoji]);\r\n    });\r\n\r\n    const timer = setTimeout(() => {\r\n      setEmojis((prev) => prev.filter((e) => e.id !== newId));\r\n    }, duration * 1000);\r\n\r\n    timeoutsRef.current.add(timer);\r\n\r\n    // PATCH: Copy ref to local variable for stable cleanup\r\n    const currentTimeouts = timeoutsRef.current;\r\n    return () => {\r\n      currentTimeouts.forEach(clearTimeout);\r\n      currentTimeouts.clear();\r\n    };\r\n  }, [lastReaction]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 pointer-events-none overflow-hidden z-50\">\r\n      <style>{`\r\n        @keyframes float-up {\r\n          0% { transform: translateY(100%) scale(0.5); opacity: 1; }\r\n          100% { transform: translateY(-100vh) scale(1.5); opacity: 0; }\r\n        }\r\n        .animate-float {\r\n          animation-name: float-up;\r\n          animation-timing-function: ease-out;\r\n          animation-fill-mode: forwards;\r\n        }\r\n      `}</style>\r\n\r\n      {emojis.map((e) => (\r\n        <div\r\n          key={e.id}\r\n          className=\"absolute bottom-0 text-4xl animate-float\"\r\n          /* webhint: ignore inline-styles */\r\n          style={{ \r\n            left: `${e.left}%`,\r\n            animationDuration: `${e.duration}s` \r\n          }}\r\n        >\r\n          {e.emoji}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAYe,SAAS;;IACtB,MAAM,eAAe,IAAA,kJAAe;yDAAC,CAAC,QAAU,MAAM,YAAY;;IAClE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAkB,EAAE;IACxD,MAAM,kBAAkB,IAAA,uKAAM,EAAgB;IAC9C,MAAM,cAAc,IAAA,uKAAM,EAAsB,IAAI;IAEpD,IAAA,0KAAS;qCAAC;YACR,IAAI,CAAC,gBAAgB,iBAAiB,gBAAgB,OAAO,EAAE;YAC/D,gBAAgB,OAAO,GAAG;YAE1B,MAAM,YAAY,aAAa,KAAK,CAAC,IAAI,CAAC,EAAE;YAC5C,MAAM,QAAQ,KAAK,GAAG;YACtB,MAAM,WAAW,IAAI,KAAK,MAAM,KAAK;YAErC,MAAM,WAA0B;gBAC9B,IAAI;gBACJ,OAAO;gBACP,MAAM,KAAK,MAAM,KAAK;gBACtB,UAAU;YACZ;YAEA;6CAAsB;oBACpB;qDAAU,CAAC,OAAS;mCAAI;gCAAM;6BAAS;;gBACzC;;YAEA,MAAM,QAAQ;mDAAW;oBACvB;2DAAU,CAAC,OAAS,KAAK,MAAM;mEAAC,CAAC,IAAM,EAAE,EAAE,KAAK;;;gBAClD;kDAAG,WAAW;YAEd,YAAY,OAAO,CAAC,GAAG,CAAC;YAExB,uDAAuD;YACvD,MAAM,kBAAkB,YAAY,OAAO;YAC3C;6CAAO;oBACL,gBAAgB,OAAO,CAAC;oBACxB,gBAAgB,KAAK;gBACvB;;QACF;oCAAG;QAAC;KAAa;IAEjB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;0BAAO,CAAC;;;;;;;;;;MAUT,CAAC;;;;;;YAEA,OAAO,GAAG,CAAC,CAAC,kBACX,6LAAC;oBAEC,WAAU;oBACV,iCAAiC,GACjC,OAAO;wBACL,MAAM,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;wBAClB,mBAAmB,GAAG,EAAE,QAAQ,CAAC,CAAC,CAAC;oBACrC;8BAEC,EAAE,KAAK;mBARH,EAAE,EAAE;;;;;;;;;;;AAanB;GApEwB;;QACD,kJAAe;;;KADd"}}]
}